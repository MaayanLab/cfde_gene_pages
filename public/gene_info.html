<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script>
        const gene_query_url = 'https://mygene.info/v3';

        const gene_id = async (gene_search) => {
            let gene_res = await fetch(`${gene_query_url}/query?q=symbol:${gene_search}`)
            if (gene_res.ok) {
                let data = await gene_res.json()
                if (Array.isArray(data.hits)) {
                    if (data.hits.length > 0) {
                        return data.hits[0]._id
                    }
                }
            }
        }

        const gene_info = async (gene_id) => {
            let info = await fetch(`${gene_query_url}/gene/${gene_id}`)
            if (info.ok) {
                let data = await info.json()
                let organism, chromosome_location, ncbi_gene_id, biological_function;
            }
        }

        const expand = async (gene_search, exp_type = "coexpression", top = 10) => {
            let gene_exp = await fetch(`https://maayanlab.cloud/enrichrsearch/gene/expand?search=${gene_search}&top=${top}&type=${exp_type}`)
            if (gene_exp.ok) {
                let data = await gene_exp.json()
                if ((Array.isArray(data.data)) && (data.success)) {
                    if (data.data.length > 0) {
                        return data.data.join(', ')
                    }
                }
            }
        }

        const predict_regulators = async (genes, type_url) => {
            let request_options = {
                method: 'POST',
                headers: new Headers({"Content-Type": "application/json"}),
                body: JSON.stringify({
                    "query_name": "gene_set_query",
                    "gene_set": genes
                }),
                redirect: 'follow'
            };
            fetch(`https://maayanlab.cloud/${type_url}/api/enrich/`, request_options)
                .then(response => response.json().then(data => data['Integrated--meanRank'].slice(0, 10)))
                .then(result => console.log(result))
                .catch(error => console.log('error', error));
        }

        (function () {
            let search = 'STAT3';
            let organism, chromosome_location, ncbi_gene_id, biological_function, similar_coexpression,
                similar_literature,
                predicted_tf, predicted_phospho;


        })();
    </script>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-lg-8 col-md-12">
            <div class="card shadow-sm m-3" title="Affiliated with the CFDE">
                <div class="card-header">
                    <div class="d-flex mt-2 mb-3">
                        <div class="m-3 vertical-align text-nowrap text-center"><h1 style="white-space: nowrap">
                            {search}</h1></div>
                        <div class="d-flex mt-2 flex-grow flex-wrap">
                            <div class="mx-2 text-nowrap"><span style="font-weight: 500">Organism</span>: {organism}
                            </div>
                            <div class="mx-2 text-nowrap"><span style="font-weight: 500">Chromosome location</span>:
                                {chromosome_location}
                            </div>
                            <div class="mx-2 text-nowrap"><span style="font-weight: 500">NCBI Gene ID</span>:
                                {ncbi_gene_id}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body row">
                    <div class="col-10">
                        <p class="card-text" style="font-size: 0.8rem"><span style="font-weight: 500">Biological function</span>:
                            {biological_function}</p>
                        <p class="card-text" style="font-size: 0.8rem"><span style="font-weight: 500">Similar genes based on mRNA co-expression</span>:
                        <div class="d-inline-flex">
                            {similar_coexpression.map(gene =>
                            <a class="mx-1" key={gene} href="">{gene}</a>
                            )}
                        </div>
                        </p>
                        <p class="card-text" style="font-size: 0.8rem"><span style="font-weight: 500">Similar genes based on literature</span>:
                        <div class="d-inline-flex">
                            {similar_literature.map(gene =>
                            <a class="mx-1" key={gene} href="">{gene}</a>
                            )}
                        </div>
                        </p>
                        <p class="card-text" style="font-size: 0.8rem"><span style="font-weight: 500">Top 10 TF predictedâ€ƒto regulate {search}</span>:
                        <div class="d-inline-flex">
                            {predicted_tf.map(gene =>
                            <a class="mx-1" key={gene} href="">{gene}</a>
                            )}
                        </div>
                        </p>
                        <p class="card-text" style="font-size: 0.8rem"><span style="font-weight: 500">Top 10 kinases predicted to phosphorylate {search}</span>:
                        <div class="d-inline-flex">
                            {predicted_phospho.map(gene =>
                            <a class="mx-1" key={gene} href="">{gene}</a>
                            )}
                        </div>
                        </p>
                    </div>
                    <div class="col-2">
                        <svg class="bd-placeholder-img img-thumbnail" xmlns="http://www.w3.org/2000/svg" role="img"
                             preserveAspectRatio="xMidYMid slice" focusable="false" width="170" height="300">
                            <title>A placeholder image</title>
                            <rect width="100%" height="100%" fill="#868e96"></rect>
                            <text x="50%" y="50%" fill="#dee2e6" dy=".3em"></text>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
